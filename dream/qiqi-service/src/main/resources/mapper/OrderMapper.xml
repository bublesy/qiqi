<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.qiqi.order.mapper.OrderMapper">
    <select id="getList" resultType="com.qiqi.admin.purchase.model.PurchaseOrderVO">
SELECT o.*,p.documents_no,p.purchaseQuantity,p.cost_price,p.amount,p.id as pid,p.end_product_pos,p.position,
p.supplier_id,p.billingDate as pBilling  from  orders o left join purchase_order p on o.no = p.task_number
        where o.is_deleted =0
        <if test=" customerName != null and customerName != '' ">
            and  o.name like concat('%', #{customerName} , '%')
        </if>
        <if test="quantityOverdue == '已过期'  ">
            and  o.delivery_date &lt; concat('%', #{date} , '%')
        </if>
        <if test="quantityOverdue == '未过期'  ">
            and  o.delivery_date &gt;= concat('%', #{date} , '%')
        </if>
        <if test="time != null and time != ''  ">
            and  o.created_time like concat('%', #{time} , '%')
        </if>
    </select>
</mapper>
